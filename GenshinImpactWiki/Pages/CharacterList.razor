@page "/characters"
@inject GenshinImpactWiki.Data.Services.CharacterService data
@inject HttpClient Http

<PageTitle>Characters</PageTitle>

<h1>Character List</h1>

@if (data.loading)
{
    <p>LOADING. . .</p>
}
@if (data.error)
{
    <p>ERROR!</p>
    <p>@data.errormsg</p>
}
@if (!data.loading && !data.error)
{
    <div class='flexbox'>
    @foreach (var character in characters!)
        {
            <CharacterListItem character=@character />
        }
    </div>
}

@code {
    private Character[]? characters;

    protected override async Task OnInitializedAsync()
    {
        characters = await data.getCharacters(Http);
        await base.OnInitializedAsync();
    }
}
